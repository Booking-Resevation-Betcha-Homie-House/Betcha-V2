<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Toast Notification Test</title>
    <link rel="stylesheet" href="/src/index.css">
    <style>
        body {
            padding: 2rem;
            font-family: system-ui, -apple-system, sans-serif;
        }
        .test-section {
            margin: 2rem 0;
            padding: 1.5rem;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
        }
        .test-button {
            padding: 0.75rem 1.5rem;
            margin: 0.5rem;
            background: #3b82f6;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
        }
        .test-button:hover {
            background: #2563eb;
        }
        .test-button.secondary {
            background: #6b7280;
        }
        .test-button.secondary:hover {
            background: #4b5563;
        }
    </style>
</head>
<body>
    <h1>Toast Notification Test</h1>
    
    <div class="test-section">
        <h2>Authentication Tests</h2>
        <p>Test different authentication scenarios</p>
        
        <button class="test-button" onclick="testNoUserId()">
            Test: No User ID
        </button>
        
        <button class="test-button" onclick="testUnverifiedUser()">
            Test: Unverified User
        </button>
        
        <button class="test-button" onclick="testValidUser()">
            Test: Valid User
        </button>
    </div>

    <div class="test-section">
        <h2>Validation Error Tests</h2>
        <p>Test different validation error types</p>
        
        <button class="test-button" onclick="testMissingDates()">
            Test: Missing Dates
        </button>
        
        <button class="test-button" onclick="testMissingProperty()">
            Test: Missing Property Data
        </button>
        
        <button class="test-button" onclick="testMissingGuests()">
            Test: Missing Guest Count
        </button>
        
        <button class="test-button" onclick="testIncompleteInfo()">
            Test: Incomplete Booking Info
        </button>
    </div>

    <div class="test-section">
        <h2>Toast Controls</h2>
        <p>Control toast notifications</p>
        
        <button class="test-button secondary" onclick="clearAllToasts()">
            Clear All Toasts
        </button>
        
        <button class="test-button" onclick="testMultipleToasts()">
            Test Multiple Toasts
        </button>
    </div>

    <div class="test-section">
        <h2>LocalStorage Controls</h2>
        <p>Set up test scenarios</p>
        
        <button class="test-button secondary" onclick="clearUserData()">
            Clear User Data
        </button>
        
        <button class="test-button secondary" onclick="setUnverifiedUser()">
            Set Unverified User
        </button>
        
        <button class="test-button secondary" onclick="setVerifiedUser()">
            Set Verified User
        </button>
    </div>

    <div class="test-section">
        <h2>Current LocalStorage State</h2>
        <div id="storageState" style="background: #f3f4f6; padding: 1rem; border-radius: 4px; font-family: monospace; font-size: 12px;">
            <!-- Storage state will be displayed here -->
        </div>
        <button class="test-button secondary" onclick="updateStorageDisplay()">
            Refresh Storage Display
        </button>
    </div>

    <script type="module">
        import { validateReservationData, showToastError, clearAllToasts } from '/src/toastNotification.js';

        // Make functions globally available for button clicks
        window.validateReservationData = validateReservationData;
        window.showToastError = showToastError;
        window.clearAllToasts = clearAllToasts;

        // Test functions
        window.testNoUserId = function() {
            localStorage.removeItem('userId');
            localStorage.removeItem('verified');
            updateStorageDisplay();
            
            const result = validateReservationData();
            console.log('No User ID test result:', result);
        };

        window.testUnverifiedUser = function() {
            localStorage.setItem('userId', 'test-user-123');
            localStorage.setItem('verified', 'false');
            updateStorageDisplay();
            
            const result = validateReservationData();
            console.log('Unverified user test result:', result);
        };

        window.testValidUser = function() {
            localStorage.setItem('userId', 'test-user-123');
            localStorage.setItem('verified', 'true');
            updateStorageDisplay();
            
            const result = validateReservationData();
            console.log('Valid user test result:', result);
            
            if (result) {
                showToastError('info', 'Validation Passed', 'All authentication checks passed successfully!');
            }
        };

        window.testMissingDates = function() {
            showToastError('warning', 'Dates Required', 'Please select check-in and check-out dates using the calendar above before making a reservation.');
        };

        window.testMissingProperty = function() {
            showToastError('error', 'Property Data Missing', 'Property information is not loaded. Please refresh the page and try again.');
        };

        window.testMissingGuests = function() {
            showToastError('warning', 'Guest Count Required', 'Please select at least one guest for your reservation.');
        };

        window.testIncompleteInfo = function() {
            showToastError('error', 'Booking Information Incomplete', 'Some required booking information is missing. Please refresh the page and try again.');
        };

        window.testMultipleToasts = function() {
            showToastError('error', 'Error Toast', 'This is an error message');
            setTimeout(() => showToastError('warning', 'Warning Toast', 'This is a warning message'), 500);
            setTimeout(() => showToastError('info', 'Info Toast', 'This is an info message'), 1000);
            setTimeout(() => showToastError('auth', 'Auth Toast', 'This is an auth message'), 1500);
        };

        // LocalStorage control functions
        window.clearUserData = function() {
            localStorage.removeItem('userId');
            localStorage.removeItem('verified');
            updateStorageDisplay();
        };

        window.setUnverifiedUser = function() {
            localStorage.setItem('userId', 'test-user-123');
            localStorage.setItem('verified', 'false');
            updateStorageDisplay();
        };

        window.setVerifiedUser = function() {
            localStorage.setItem('userId', 'test-user-123');
            localStorage.setItem('verified', 'true');
            updateStorageDisplay();
        };

        window.updateStorageDisplay = function() {
            const storageDiv = document.getElementById('storageState');
            const userId = localStorage.getItem('userId');
            const verified = localStorage.getItem('verified');
            
            storageDiv.innerHTML = `
                <strong>Current LocalStorage:</strong><br>
                userId: ${userId || '(not set)'}<br>
                verified: ${verified || '(not set)'}
            `;
        };

        // Initialize storage display
        updateStorageDisplay();
    </script>
</body>
</html>
